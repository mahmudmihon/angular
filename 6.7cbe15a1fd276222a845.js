(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"305l":function(r,t,e){"use strict";e.r(t),e.d(t,"AuthModule",function(){return F});var i=e("tyNb"),o=e("3Pt+"),n=e("fXoL"),a=e("z6cu"),s=e("JIr8"),d=e("6pWs"),l=e("tk/3");let c=(()=>{class r extends d.a{constructor(r){super(),this.http=r}searchUserByEmailAndPassword(r,t){return r=encodeURIComponent(r),t=encodeURIComponent(t),this.http.get(`${this.loginsUrl}/?email=${r}&password=${t}`).pipe(Object(s.a)(r=>Object(a.a)(r)))}}return r.\u0275fac=function(t){return new(t||r)(n.Zb(l.c))},r.\u0275prov=n.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var m=e("dNgK"),b=e("ofXK");function u(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",19),n.Vb(2,"p",20),n.Dc(3,"Email is required!"),n.Ub(),n.Ub(),n.Vb(4,"div",19),n.Vb(5,"p",20),n.Dc(6,"Invalid email!"),n.Ub(),n.Ub(),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.email.errors.required),n.Eb(3),n.mc("hidden",!r.email.errors.pattern)}}function p(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",19),n.Vb(2,"p",20),n.Dc(3,"Password is required!"),n.Ub(),n.Ub(),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.password.errors.required)}}const f=function(){return["/registration"]};let g=(()=>{class r{constructor(r,t,e,i){this.formBuilder=r,this.loginService=t,this.router=e,this.snackBar=i,this.horizontalPosition="center",this.verticalPosition="bottom"}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[o.p.required,o.p.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",[o.p.required]],rememberMe:[""]})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}onSubmit(r){this.loginService.searchUserByEmailAndPassword(r.email,r.password).subscribe(r=>{null!=r[0]?(this.loginInfo=r[0],sessionStorage.setItem("id",this.loginInfo.id.toString()),"admin"===this.loginInfo.role?(sessionStorage.setItem("role","admin"),this.router.navigate(["/admin"])):(sessionStorage.setItem("role","user"),this.router.navigate(["/user"]))):this.showInvalidMessage()})}showInvalidMessage(){this.snackBar.open("INVALID EMAIL OR PASSWORD!"," ",{duration:1e3,panelClass:["mat-toolbar","mat-warn"],horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}}return r.\u0275fac=function(t){return new(t||r)(n.Pb(o.d),n.Pb(c),n.Pb(i.b),n.Pb(m.a))},r.\u0275cmp=n.Jb({type:r,selectors:[["app-login"]],decls:31,vars:6,consts:[[1,"container-fluid","loginForm"],[1,"row"],[1,"col-sm-9","col-md-7","col-lg-5","mx-auto"],[1,"card","card-signin","my-5"],[1,"card-body"],[1,"card-title","text-center"],["novalidate","",3,"formGroup","ngSubmit"],["lform","ngForm"],[1,"form-group"],["for","formGroupExampleInput"],["type","email","id","formGroupExampleInput","name","email","formControlName","email","placeholder","Email Address",1,"form-control","rounded-pill"],[4,"ngIf"],["for","formGroupExampleInput2"],["type","password","id","formGroupExampleInput2","name","password","formControlName","password","placeholder","Password",1,"form-control","rounded-pill"],[1,"custom-control","custom-checkbox","mr-sm-2"],["type","checkbox","id","customControlAutosizing","name","rememberMe","formControlName","rememberMe",1,"custom-control-input"],["for","customControlAutosizing",1,"custom-control-label"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block","rounded-pill",3,"disabled"],[3,"routerLink"],[3,"hidden"],[1,"text-danger","mt-1","font-weight-bold"]],template:function(r,t){if(1&r){const r=n.Wb();n.Vb(0,"div",0),n.Vb(1,"div",1),n.Vb(2,"div",2),n.Vb(3,"div",3),n.Vb(4,"div",4),n.Vb(5,"h5",5),n.Dc(6,"Welcome!"),n.Ub(),n.Vb(7,"form",6,7),n.cc("ngSubmit",function(){n.uc(r);const e=n.sc(8);return t.onSubmit(e.value)}),n.Vb(9,"div",8),n.Vb(10,"label",9),n.Dc(11,"Email"),n.Ub(),n.Qb(12,"input",10),n.Cc(13,u,7,2,"div",11),n.Ub(),n.Vb(14,"div",8),n.Vb(15,"label",12),n.Dc(16,"Password"),n.Ub(),n.Qb(17,"input",13),n.Cc(18,p,4,1,"div",11),n.Ub(),n.Vb(19,"div",8),n.Vb(20,"div",14),n.Qb(21,"input",15),n.Vb(22,"label",16),n.Dc(23,"Remember me"),n.Ub(),n.Ub(),n.Ub(),n.Vb(24,"div",8),n.Vb(25,"button",17),n.Dc(26,"Sign in"),n.Ub(),n.Ub(),n.Vb(27,"div",8),n.Dc(28," Don't have an account? "),n.Vb(29,"a",18),n.Dc(30,"Sign up"),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()}2&r&&(n.Eb(7),n.mc("formGroup",t.loginForm),n.Eb(6),n.mc("ngIf",!(null!=t.email&&t.email.valid)&&((null==t.email?null:t.email.dirty)||(null==t.email?null:t.email.touched))),n.Eb(5),n.mc("ngIf",!(null!=t.password&&t.password.valid)&&((null==t.password?null:t.password.dirty)||(null==t.password?null:t.password.touched))),n.Eb(7),n.mc("disabled",!t.loginForm.valid),n.Eb(4),n.mc("routerLink",n.oc(5,f)))},directives:[o.r,o.k,o.f,o.c,o.j,o.e,b.l,o.a,i.d],styles:["[_ngcontent-%COMP%]:root{--input-padding-x:1.5rem;--input-padding-y:.75rem}.loginForm[_ngcontent-%COMP%]{margin:0 auto;background-image:url(https://i.ibb.co/9Hcwh0r/1.jpg);background-repeat:no-repeat;background-size:cover;height:100%;padding-top:65px}.card-signin[_ngcontent-%COMP%]{border:0;border-radius:1rem;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.1)}.card-signin[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:2rem;font-weight:300;font-size:1.5rem}.card-signin[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.form-signin[_ngcontent-%COMP%]{width:100%}"]}),r})();class h{}var v=e("ajio");class U{}let w=(()=>{class r extends d.a{constructor(r){super(),this.http=r}addLoginInfo(r){return this.http.post(this.loginsUrl,r,this.httpOptions).pipe(Object(s.a)(r=>Object(a.a)(r)))}addUserInfo(r){return this.http.post(this.infoUrl,r,this.httpOptions).pipe(Object(s.a)(r=>Object(a.a)(r)))}getUsers(){return this.http.get(this.infoUrl).pipe(Object(s.a)(r=>Object(a.a)(r)))}searchUserByEmail(r){return r=encodeURIComponent(r),this.http.get(`${this.loginsUrl}/?email=${r}`).pipe(Object(s.a)(r=>Object(a.a)(r)))}}return r.\u0275fac=function(t){return new(t||r)(n.Zb(l.c))},r.\u0275prov=n.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var V=e("lJxs");let I=(()=>{class r{constructor(r){this.registrationService=r}emailValidator(){return r=>this.registrationService.searchUserByEmail(r.value).pipe(Object(V.a)(r=>null!=r[0]?{emailExists:!0}:null))}}return r.\u0275fac=function(t){return new(t||r)(n.Zb(w))},r.\u0275prov=n.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function P(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",21),n.Vb(2,"p",22),n.Dc(3,"First Name is required!"),n.Ub(),n.Ub(),n.Vb(4,"div",21),n.Vb(5,"p",22),n.Dc(6,"First Name cann't contain any number or special characters!"),n.Ub(),n.Ub(),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.firstName.errors.required),n.Eb(3),n.mc("hidden",!r.firstName.errors.pattern)}}function E(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",21),n.Vb(2,"p",22),n.Dc(3,"Last Name is required!"),n.Ub(),n.Ub(),n.Vb(4,"div",21),n.Vb(5,"p",22),n.Dc(6,"Last Name cann't contain any number or special characters!"),n.Ub(),n.Ub(),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.lastName.errors.required),n.Eb(3),n.mc("hidden",!r.lastName.errors.pattern)}}function N(r,t){1&r&&(n.Vb(0,"div"),n.Vb(1,"p",22),n.Dc(2,"Email already exist!"),n.Ub(),n.Ub())}function y(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",21),n.Vb(2,"p",22),n.Dc(3,"Email is required!"),n.Ub(),n.Ub(),n.Vb(4,"div",21),n.Vb(5,"p",22),n.Dc(6,"Invalid email!"),n.Ub(),n.Ub(),n.Cc(7,N,3,0,"div",11),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.email.errors.required),n.Eb(3),n.mc("hidden",!r.email.errors.pattern),n.Eb(3),n.mc("ngIf",r.email.errors.emailExists)}}function C(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",21),n.Vb(2,"p",22),n.Dc(3,"Password is required!"),n.Ub(),n.Ub(),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.password.errors.required)}}function O(r,t){1&r&&(n.Vb(0,"div"),n.Vb(1,"p",22),n.Dc(2,"Password don't match!"),n.Ub(),n.Ub())}function x(r,t){if(1&r&&(n.Vb(0,"div"),n.Vb(1,"div",21),n.Vb(2,"p",22),n.Dc(3,"Confirm Password is required!"),n.Ub(),n.Ub(),n.Cc(4,O,3,0,"div",11),n.Ub()),2&r){const r=n.gc();n.Eb(1),n.mc("hidden",!r.confirmPassword.errors.required),n.Eb(3),n.mc("ngIf",r.confirmPassword.errors.passwordMatch)}}const D=function(){return["/login"]},M=[{path:"",children:[{path:"login",component:g},{path:"registration",component:(()=>{class r{constructor(r,t,e,i){this.formBuilder=r,this.registrationService=t,this.emailService=e,this.router=i,this.profilePicture="https://i.ibb.co/y888cqN/man.png",this.role="user",this.userId=Math.floor(1e3+9e3*Math.random())}ngOnInit(){this.registrationForm=this.formBuilder.group({firstName:["",[o.p.required,o.p.pattern("^[a-zA-Z]{2,}$")]],lastName:["",[o.p.required,o.p.pattern("^[a-zA-Z]{2,}$")]],email:["",[o.p.required,o.p.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")],this.emailService.emailValidator()],password:["",[o.p.required]],confirmPassword:["",[o.p.required]]},{validator:Object(v.a)("password","confirmPassword")})}get firstName(){return this.registrationForm.get("firstName")}get lastName(){return this.registrationForm.get("lastName")}get email(){return this.registrationForm.get("email")}get password(){return this.registrationForm.get("password")}get confirmPassword(){return this.registrationForm.get("confirmPassword")}onSubmit(r){this.addLoginInfo(r.email,r.confirmPassword),this.addUserInfo(r.firstName,r.lastName)}addLoginInfo(r,t){this.loginInfo=new U,this.loginInfo.id=this.userId,this.loginInfo.email=r,this.loginInfo.password=t,this.loginInfo.role=this.role,this.registrationService.addLoginInfo(this.loginInfo).subscribe()}addUserInfo(r,t){this.userInfo=new h,this.userInfo.id=this.userId,this.userInfo.profilePicture=this.profilePicture,this.userInfo.fullName=r+" "+t,this.registrationService.addUserInfo(this.userInfo).subscribe(()=>{this.router.navigate(["./"])})}}return r.\u0275fac=function(t){return new(t||r)(n.Pb(o.d),n.Pb(w),n.Pb(I),n.Pb(i.b))},r.\u0275cmp=n.Jb({type:r,selectors:[["app-registration"]],decls:41,vars:9,consts:[[1,"container-fluid","registrationForm"],[1,"row"],[1,"col-sm-9","col-md-7","col-lg-5","mx-auto"],[1,"card","card-signup","my-5"],[1,"card-body"],[1,"card-title","text-center"],["novalidate","",3,"formGroup","ngSubmit"],["rform","ngForm"],[1,"form-group"],[1,"col"],["type","text","name","firstName","formControlName","firstName","placeholder","First name",1,"form-control","rounded-pill"],[4,"ngIf"],["type","text","name","lastName","formControlName","lastName","placeholder","Last name",1,"form-control","rounded-pill"],["for","formGroupExampleInput"],["type","email","id","formGroupExampleInput","name","email","formControlName","email","placeholder","Email Address",1,"form-control","rounded-pill"],["for","formGroupExampleInput2"],["type","password","id","formGroupExampleInput2","name","password","formControlName","password","placeholder","Password",1,"form-control","rounded-pill"],["for","formGroupExampleInput3"],["type","password","id","formGroupExampleInput3","name","confirmPassword","formControlName","confirmPassword","placeholder","Confirm Password",1,"form-control","rounded-pill"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block","rounded-pill",3,"disabled"],[3,"routerLink"],[3,"hidden"],[1,"text-danger","mt-1","font-weight-bold"]],template:function(r,t){if(1&r){const r=n.Wb();n.Vb(0,"div",0),n.Vb(1,"div",1),n.Vb(2,"div",2),n.Vb(3,"div",3),n.Vb(4,"div",4),n.Vb(5,"h5",5),n.Dc(6,"Registration!"),n.Ub(),n.Vb(7,"form",6,7),n.cc("ngSubmit",function(){n.uc(r);const e=n.sc(8);return t.onSubmit(e.value)}),n.Vb(9,"div",8),n.Vb(10,"label"),n.Dc(11,"Full Name"),n.Ub(),n.Vb(12,"div",1),n.Vb(13,"div",9),n.Qb(14,"input",10),n.Cc(15,P,7,2,"div",11),n.Ub(),n.Vb(16,"div",9),n.Qb(17,"input",12),n.Cc(18,E,7,2,"div",11),n.Ub(),n.Ub(),n.Ub(),n.Vb(19,"div",8),n.Vb(20,"label",13),n.Dc(21,"Email"),n.Ub(),n.Qb(22,"input",14),n.Cc(23,y,8,3,"div",11),n.Ub(),n.Vb(24,"div",8),n.Vb(25,"label",15),n.Dc(26,"Password"),n.Ub(),n.Qb(27,"input",16),n.Cc(28,C,4,1,"div",11),n.Ub(),n.Vb(29,"div",8),n.Vb(30,"label",17),n.Dc(31,"Confirm Password"),n.Ub(),n.Qb(32,"input",18),n.Cc(33,x,5,2,"div",11),n.Ub(),n.Vb(34,"div",8),n.Vb(35,"button",19),n.Dc(36,"Sign up"),n.Ub(),n.Ub(),n.Vb(37,"div",8),n.Dc(38," Already have an account? "),n.Vb(39,"a",20),n.Dc(40,"Sign in"),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()}2&r&&(n.Eb(7),n.mc("formGroup",t.registrationForm),n.Eb(8),n.mc("ngIf",!(null!=t.firstName&&t.firstName.valid)&&((null==t.firstName?null:t.firstName.dirty)||(null==t.firstName?null:t.firstName.touched))),n.Eb(3),n.mc("ngIf",!(null!=t.lastName&&t.lastName.valid)&&((null==t.lastName?null:t.lastName.dirty)||(null==t.lastName?null:t.lastName.touched))),n.Eb(5),n.mc("ngIf",!(null!=t.email&&t.email.valid)&&((null==t.email?null:t.email.dirty)||(null==t.email?null:t.email.touched))),n.Eb(5),n.mc("ngIf",!(null!=t.password&&t.password.valid)&&((null==t.password?null:t.password.dirty)||(null==t.password?null:t.password.touched))),n.Eb(5),n.mc("ngIf",!(null!=t.confirmPassword&&t.confirmPassword.valid)&&((null==t.confirmPassword?null:t.confirmPassword.dirty)||(null==t.confirmPassword?null:t.confirmPassword.touched))),n.Eb(2),n.mc("disabled",!t.registrationForm.valid),n.Eb(4),n.mc("routerLink",n.oc(8,D)))},directives:[o.r,o.k,o.f,o.c,o.j,o.e,b.l,i.d],styles:["[_ngcontent-%COMP%]:root{--input-padding-x:1.5rem;--input-padding-y:.75rem}.registrationForm[_ngcontent-%COMP%]{margin:0 auto;background-image:url(https://i.ibb.co/9Hcwh0r/1.jpg);background-repeat:no-repeat;background-size:cover;height:100%;padding-top:40px}.card-signup[_ngcontent-%COMP%]{border:0;border-radius:1rem;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.1)}.card-signup[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:2rem;font-weight:300;font-size:1.5rem}.card-signup[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.form-signin[_ngcontent-%COMP%]{width:100%}"]}),r})()},{path:"",redirectTo:"login",pathMatch:"full"}]}];let S=(()=>{class r{}return r.\u0275mod=n.Nb({type:r}),r.\u0275inj=n.Mb({factory:function(t){return new(t||r)},imports:[[i.e.forChild(M)],i.e]}),r})();var k=e("PCNd");let F=(()=>{class r{}return r.\u0275mod=n.Nb({type:r}),r.\u0275inj=n.Mb({factory:function(t){return new(t||r)},imports:[[S,l.d,k.a]]}),r})()}}]);